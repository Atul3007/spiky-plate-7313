<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    table th{
    color: rgb(11, 11, 11);
    border: 1px solid rgb(7, 20, 68);
}

table td{
 border: 1px solid rgb(11, 11, 11); 
 background-color: aquamarine;
}
table {
    font-family: Arial, Helvetica, sans-serif;
    border-collapse: collapse;
    width: 60%;
    margin: auto;
    margin-top: 50px;
    text-align: center;
    background-color: yellow;
  }
  .image{
    width: 10%;
    border: 1px solid green;
  }
</style>
<body>
    <div><h1>Product List</h1></div>
 
     <select name="Brands" id="brand">
      <option value="">Brands</option>
      <option value="Zebronics">Zebronics</option>
      <option value="Apple">Apple</option>
      <option value="HP">HP</option>
      <option value="Dell">Dell</option>
     </select>
    <table>
        <thead>
            <tr>
          <th>id</th>
          <th>brand</th>
          
          <th>img</th>
          <th>price</th>
          <th>details</th>
          <th>category</th>
          <th>add</th>
        </tr>
        </thead>

        <tbody>
            <!-- append it -->
        </tbody>
    </table>
</body>
</html>
<script>
   let forfilter=JSON.parse(localStorage.getItem("addtofilter"))
  
   let localdata=JSON.parse(localStorage.getItem("addtofilter"))||[];
  async function data(){
    try{
    let res=await fetch("https://dbioz2ek0e.execute-api.ap-south-1.amazonaws.com/mockapi/get-tech-products")
    let out=await res.json();
     alldata=out.data
     toDisplay(out.data)
     localdata.push(out.data);
     localStorage.setItem("addtofilter",JSON.stringify(localdata))
   
  }
  catch(error){
    console.log("error");
  }

}
data()
let body=document.querySelector("tbody")
function toDisplay(arr){

    arr.map(el => { 
        console.log(el.brand)
        
            let tr=document.createElement("tr");
            
       
       let id=document.createElement("td");
       id.innerText=el.id;
       let brand=document.createElement("td")
       brand.innerText=el.brand;
       let img=document.createElement("img");
       img.setAttribute("src", el.img);
       img.setAttribute("class", "image")
       let  price=document.createElement("td");
         price.innerText=el.price;
         let details=document.createElement("td")
         details.innerText=el.details;
         let category=document.createElement("td");
         category.innerText=el.category
         let add=document.createElement("td");
         add.innerHTML="ADD";
         add.style.background="red"
         add.addEventListener("click",function(){
          addData("Addedtodash",el)
         })
         tr.append(id,brand,img,price,details,category,add);
         
         body.append(tr);
         
        

    });
}

function addData(key,value){
    let newData=JSON.parse(localStorage.getItem(key))||[];
    newData.push(value);
     localStorage.setItem(key,JSON.stringify(newData))
}

// let fil=document.querySelector("#brand")

// document.addEventListener("change",function(){

//   if(fil.value==""|| fil.value=="all"){
//     toDisplay(forfilter);
//     }else{
//     let filterdata=forfilter.filter(function(el){
//         return el.brand===fil.value
//     })
//     toDisplay(out.data);
// }
// })

  




</script>